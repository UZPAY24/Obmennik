const modalCach=document.getElementById("modalCach"),buttonContinue=document.getElementById("buttonContinue"),cancelButton=document.getElementById("cancelButton"),applyButton=document.getElementById("applyButton"),sumInput=document.getElementById("sumInput"),selectPay=document.getElementById("selectPay"),inputBankAccount=document.getElementById("inputBankAccount"),sumOutput=document.getElementById("sumOutput"),inputUserAccount=document.getElementById("inputUserAccount"),emailField=document.getElementById("emailField"),errorModal=document.getElementById("errorModal"),closeErrorWindow=document.getElementById("closeErrorWindow"),messageErrorText=document.getElementById("messageErrorText"),messageModal=document.getElementById("messageModal"),closeMessageModal=document.getElementById("closeMessageModal"),messageModalText=document.getElementById("messageModalText"),burger=document.querySelector(".burger"),navbar_menu=document.querySelector(".navbar-menu"),wait_div=document.querySelector(".wait-div"),RATES=1500,MINSUM=2500,QIWI="+7 928 543 4455",YANDEX="4140456732452356",BANK="4243 3000 1254 8976";let exchangeForm={},flag=!0;function validateSum(){return!(sumInput.value<2500)}function validateForms(){return""!=inputBankAccount.value&&""!=inputUserAccount.value}function startExchangeForm(e){headerCash.innerHTML=`Заявка №${e.id} | Купить биткоин`,walletUser.innerHTML=e.walletUser,fromAccount.innerHTML=e.fromAccount,transferAmount.innerHTML=e.transferAmount,"Qiwi RUB"==e.purse?(purse.innerHTML=`${e.purse} ${QIWI}`,exchangeForm.score=QIWI):"Сбербанк VISA"==e.purse?(purse.innerHTML=`${e.purse} ${BANK}`,exchangeForm.score=BANK):"Яндекс деньги"==e.purse&&(purse.innerHTML=`${e.purse} ${YANDEX}`,exchangeForm.score=YANDEX),emailUser.innerHTML=e.userEmail,modalCach.classList.add("is-active")}function resetInputs(){sumInput.value=0,inputBankAccount.value="0",inputUserAccount.value="0",sumOutput.value=0,emailField.value=""}burger.addEventListener("click",()=>{flag?(burger.classList.add("is-active"),navbar_menu.classList.add("is-active")):(burger.classList.remove("is-active"),navbar_menu.classList.remove("is-active")),flag=!flag}),sumInput.addEventListener("change",()=>{let e=sumInput.value/1500;sumOutput.value=e,sumInput.classList.remove("is-danger")}),sumOutput.addEventListener("change",()=>{let e=1500*sumOutput.value;sumInput.value=e}),closeMessageModal.addEventListener("click",()=>{messageModal.classList.remove("is-active")}),buttonContinue.addEventListener("click",()=>{validateSum()?validateForms()?(exchangeForm={id:Math.floor(1e3+9e3*Math.random()),walletUser:inputUserAccount.value,fromAccount:inputBankAccount.value,transferAmount:sumInput.value,purse:selectPay.value,score:null,userEmail:emailField.value},startExchangeForm(exchangeForm)):(messageErrorText.innerHTML="Сначала заполните все формы!",errorModal.classList.add("is-active"),inputBankAccount.classList.add("is-danger"),inputUserAccount.classList.add("is-danger")):(messageErrorText.innerHTML="Минимальная сумма обменна 2500 руб.",errorModal.classList.add("is-active"),sumInput.classList.add("is-danger"))}),closeErrorWindow.addEventListener("click",()=>{errorModal.classList.remove("is-active")}),cancelButton.addEventListener("click",()=>{modalCach.classList.remove("is-active"),wait_div.classList.remove("is-active"),applyButton.classList.remove("is-loading"),cancelButton.innerText="Отказаться"}),inputBankAccount.addEventListener("change",()=>{inputBankAccount.classList.remove("is-danger")}),inputUserAccount.addEventListener("change",()=>{inputUserAccount.classList.remove("is-danger")}),applyButton.addEventListener("click",()=>{if(resetInputs(),wait_div.classList.add("is-active"),applyButton.classList.add("is-loading"),cancelButton.innerText="Закрыть",""!=exchangeForm);});